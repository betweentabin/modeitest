<!DOCTYPE html>
<html>
<head>
    <title>Direct Vue Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: 0 auto; }
        .code { background: #1e1e1e; color: #d4d4d4; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: 'Courier New', monospace; overflow-x: auto; }
        .step { background: #f0f8ff; padding: 15px; margin: 15px 0; border-left: 4px solid #0066cc; }
        h2 { color: #dc3545; }
        .warning { background: #fff3cd; padding: 10px; border-left: 4px solid #ffc107; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>🔧 Vue データ直接テスト</h1>
    
    <div class="warning">
        <strong>⚠️ 重要：</strong> HomePage (http://localhost:8081) を開いてから、以下のコマンドを実行してください。
    </div>
    
    <div class="step">
        <h2>Step 1: すべてのVueコンポーネントを確認</h2>
        <p>コンソールに貼り付けて実行：</p>
        <div class="code">// すべてのVueインスタンスを探す
function getAllVueComponents() {
  const components = [];
  const root = document.querySelector('#app').__vue__;
  
  function traverse(component) {
    if (component) {
      components.push({
        name: component.$options.name || 'Unnamed',
        el: component.$el,
        data: component.$data
      });
      
      if (component.$children) {
        component.$children.forEach(child => traverse(child));
      }
    }
  }
  
  traverse(root);
  return components;
}

const allComponents = getAllVueComponents();
console.table(allComponents.map(c => ({ name: c.name })));
console.log('Total components found:', allComponents.length);

// HomePageを探す
const homePage = allComponents.find(c => c.name === 'HomePage');
if (homePage) {
  console.log('✅ HomePage found!');
  window.homePageComponent = homePage;
} else {
  console.log('❌ HomePage not found. Looking for similar names...');
  const similar = allComponents.filter(c => c.name && c.name.toLowerCase().includes('home'));
  console.log('Similar components:', similar);
}</div>
    </div>
    
    <div class="step">
        <h2>Step 2: データの内容を確認</h2>
        <p>Step 1でHomePageが見つかったら実行：</p>
        <div class="code">// HomePageのデータを確認
if (window.homePageComponent) {
  const data = window.homePageComponent.data;
  console.log('=== HomePage Data Values ===');
  console.log('seminar:', data.seminar);
  console.log('publications1:', data.publications1);
  console.log('infomation1:', data.infomation1);
  console.log('date1:', data.date1);
  console.log('hotInfomationVol319:', data.hotInfomationVol319);
  
  // 最初の10個のプロパティを表示
  const keys = Object.keys(data).slice(0, 10);
  console.log('First 10 properties:', keys);
}</div>
    </div>
    
    <div class="step">
        <h2>Step 3: Vueインスタンスから直接アクセス</h2>
        <p>別の方法で試す：</p>
        <div class="code">// Vue DevToolsがない場合の代替方法
const app = document.querySelector('#app');
if (app && app.__vue__) {
  console.log('Vue app found');
  
  // すべての子コンポーネントを再帰的に探す
  let homePageFound = null;
  
  function findHomePage(vm) {
    if (vm.$options.name === 'HomePage') {
      homePageFound = vm;
      return;
    }
    if (vm.$children && vm.$children.length) {
      vm.$children.forEach(child => {
        if (!homePageFound) findHomePage(child);
      });
    }
  }
  
  findHomePage(app.__vue__);
  
  if (homePageFound) {
    console.log('✅ HomePage component found via recursion!');
    
    // データを直接確認
    console.log('Current seminar value:', homePageFound.seminar);
    console.log('Current publications1 value:', homePageFound.publications1);
    console.log('Current infomation1 value:', homePageFound.infomation1);
    
    // 手動で値を変更してテスト
    console.log('📝 Attempting to update values...');
    homePageFound.seminar = '★テスト★セミナー(999件)';
    homePageFound.publications1 = '★テスト★刊行物(888件)';
    homePageFound.infomation1 = '★テスト★お知らせ(777件)';
    homePageFound.$forceUpdate();
    
    console.log('✅ Values updated! Check if ★テスト★ appears on screen');
    
    // グローバル変数に保存
    window.HP = homePageFound;
    console.log('💡 Tip: You can now access HomePage component via window.HP');
  } else {
    console.log('❌ HomePage not found');
    console.log('Available components:', app.__vue__.$children.map(c => c.$options.name));
  }
} else {
  console.log('❌ Vue app not found on #app element');
}</div>
    </div>
    
    <div class="step">
        <h2>Step 4: データを手動でリロード</h2>
        <p>HomePageコンポーネントが見つかったら：</p>
        <div class="code">// loadLatestData を手動で呼び出す
if (window.HP) {
  console.log('📡 Manually calling loadLatestData...');
  window.HP.loadLatestData().then(() => {
    console.log('✅ Data reload complete');
    console.log('New values:');
    console.log('- seminar:', window.HP.seminar);
    console.log('- publications1:', window.HP.publications1);
    console.log('- infomation1:', window.HP.infomation1);
  }).catch(err => {
    console.error('❌ Error loading data:', err);
  });
} else {
  console.log('❌ HomePage not found. Run Step 3 first.');
}</div>
    </div>
    
    <div class="warning">
        <strong>🎯 結果を教えてください：</strong>
        <ul>
            <li>Step 1: コンポーネントのリストに「HomePage」はありましたか？</li>
            <li>Step 2: データの値は何と表示されましたか？（undefined？実際の値？）</li>
            <li>Step 3: ★テスト★ の文字は画面に表示されましたか？</li>
            <li>エラーメッセージは出ましたか？</li>
        </ul>
    </div>
</body>
</html>