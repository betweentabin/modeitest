<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆŠè¡Œç‰©å‹•çš„è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #1A1A1A;
            border-bottom: 3px solid #da5761;
            padding-bottom: 10px;
        }
        .section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        button {
            background-color: #da5761;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #c44853;
        }
        .success-btn {
            background-color: #28a745;
        }
        .success-btn:hover {
            background-color: #218838;
        }
        .info-btn {
            background-color: #17a2b8;
        }
        .info-btn:hover {
            background-color: #138496;
        }
        .result {
            background-color: #e8f5e9;
            border: 1px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            display: none;
        }
        .result.error {
            background-color: #ffebee;
            border-color: #f44336;
        }
        .result.show {
            display: block;
        }
        .publication-item {
            background-color: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
        .test-step {
            background-color: #fff3cd;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        .check-list {
            list-style-type: none;
            padding: 0;
        }
        .check-list li {
            padding: 5px 0;
        }
        .check-list li:before {
            content: "â˜ ";
            font-weight: bold;
            margin-right: 10px;
        }
        .code-block {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ åˆŠè¡Œç‰©ã®å‹•çš„è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="section">
        <h2>ğŸ“‹ ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹</h2>
        <p>HomePage.vueã«ã¯ä»¥ä¸‹ã®åˆŠè¡Œç‰©è¡¨ç¤ºæ©Ÿèƒ½ãŒå®Ÿè£…æ¸ˆã¿ã§ã™ï¼š</p>
        <ul>
            <li>âœ… ä¸Šéƒ¨ã‚«ãƒ¼ãƒ‰ã®ã€ŒåˆŠè¡Œç‰©(Nä»¶)ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</li>
            <li>âœ… Publicationsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³åˆŠè¡Œç‰©ï¼ˆæœ€æ–°1ä»¶ï¼‰</li>
            <li>âœ… å³å´ã®åˆŠè¡Œç‰©ãƒªã‚¹ãƒˆï¼ˆæœ€å¤§4ä»¶ï¼‰</li>
            <li>âœ… ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ãƒšãƒ¼ã‚¸ã¸ã®é·ç§»</li>
            <li>âœ… CMSã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿è‡ªå‹•å–å¾—</li>
        </ul>
    </div>
    
    <div class="section">
        <h2>ğŸš€ Step 1: ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</h2>
        <button onclick="checkCurrentData()" class="info-btn">ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</button>
        <div id="current-result" class="result"></div>
    </div>
    
    <div class="section">
        <h2>ğŸ“š Step 2: æ–°ã—ã„åˆŠè¡Œç‰©ã‚’è¿½åŠ </h2>
        <p>CMSã«æ–°ã—ã„åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¦ã€HomePage.vueã«åæ˜ ã•ã‚Œã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚</p>
        <div class="button-group">
            <button onclick="addTestPublication()">ãƒ†ã‚¹ãƒˆåˆŠè¡Œç‰©ã‚’è¿½åŠ </button>
            <button onclick="addMultiplePublications()">è¤‡æ•°ã®åˆŠè¡Œç‰©ã‚’ä¸€æ‹¬è¿½åŠ </button>
            <button onclick="clearPublications()" style="background-color: #dc3545;">åˆŠè¡Œç‰©ã‚’ã‚¯ãƒªã‚¢</button>
        </div>
        <div id="add-result" class="result"></div>
    </div>
    
    <div class="section">
        <h2>ğŸ‘€ Step 3: HomePage.vueã§ç¢ºèª</h2>
        <div class="test-step">
            <h3>ç¢ºèªé …ç›®ï¼š</h3>
            <ul class="check-list">
                <li>ä¸Šéƒ¨ã®åˆŠè¡Œç‰©ã‚«ãƒ¼ãƒ‰ã«ã€ŒåˆŠè¡Œç‰©(Nä»¶)ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li>Publicationsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ç”»åƒãŒæ›´æ–°ã•ã‚Œã‚‹</li>
                <li>å³å´ã®ãƒªã‚¹ãƒˆã«æœ€æ–°4ä»¶ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li>åˆŠè¡Œç‰©ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹</li>
            </ul>
        </div>
        <button onclick="openHomePage()" class="success-btn">HomePage ã‚’é–‹ã</button>
    </div>
    
    <div class="section">
        <h2>ğŸ”„ Step 4: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã®ãƒ†ã‚¹ãƒˆ</h2>
        <p>ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ã¦ã‹ã‚‰HomePageã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€æœ€æ–°ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        <button onclick="testRealtimeUpdate()">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆ</button>
        <div id="realtime-result" class="result"></div>
    </div>
    
    <div class="section">
        <h2>ğŸ› ï¸ ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h2>
        <button onclick="showDebugInfo()">è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º</button>
        <div id="debug-result" class="result"></div>
    </div>

    <script>
        const STORAGE_KEY = 'cms_mock_data';
        
        function loadMockData() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : null;
        }
        
        function saveMockData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }
        
        function checkCurrentData() {
            const resultDiv = document.getElementById('current-result');
            resultDiv.className = 'result show';
            
            const data = loadMockData();
            if (data && data.publications) {
                let html = `<strong>ğŸ“š ç¾åœ¨ã®åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿ (${data.publications.length}ä»¶):</strong><br><br>`;
                data.publications.forEach((pub, index) => {
                    html += `<div class="publication-item">
                        <strong>#${index + 1}: ${pub.title}</strong><br>
                        ç™ºè¡Œæ—¥: ${pub.publication_date || pub.publishedDate || 'æœªè¨­å®š'}<br>
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${pub.category || 'æœªåˆ†é¡'}<br>
                        èª¬æ˜: ${pub.description ? pub.description.substring(0, 50) + '...' : 'èª¬æ˜ãªã—'}
                    </div>`;
                });
                resultDiv.innerHTML = html;
            } else {
                resultDiv.innerHTML = 'âŒ åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“';
            }
        }
        
        function addTestPublication() {
            const resultDiv = document.getElementById('add-result');
            resultDiv.className = 'result show';
            
            const data = loadMockData() || { publications: [] };
            data.publications = data.publications || [];
            
            const newPublication = {
                id: Date.now(),
                title: `ã€æ–°ç€ã€‘ãƒ†ã‚¹ãƒˆåˆŠè¡Œç‰© ${new Date().toLocaleDateString('ja-JP')}`,
                description: 'ã“ã‚Œã¯å‹•çš„è¡¨ç¤ºãƒ†ã‚¹ãƒˆã®ãŸã‚ã«è¿½åŠ ã•ã‚ŒãŸåˆŠè¡Œç‰©ã§ã™ã€‚HomePage.vueã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
                publication_date: new Date().toISOString().split('T')[0],
                publishedDate: new Date().toISOString().split('T')[0], // äº’æ›æ€§ã®ãŸã‚ä¸¡æ–¹è¨­å®š
                category: 'special',
                type: 'pdf',
                author: 'ãƒ†ã‚¹ãƒˆç®¡ç†è€…',
                pages: 42,
                file_url: '/files/test-publication.pdf',
                image_url: '', // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒã‚’ä½¿ç”¨
                file_size: 3.2,
                download_count: 0,
                is_published: true
            };
            
            // æœ€æ–°ã‚’å…ˆé ­ã«è¿½åŠ 
            data.publications.unshift(newPublication);
            saveMockData(data);
            
            resultDiv.innerHTML = `
                <strong>âœ… åˆŠè¡Œç‰©ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼</strong><br><br>
                <strong>ã‚¿ã‚¤ãƒˆãƒ«:</strong> ${newPublication.title}<br>
                <strong>ç™ºè¡Œæ—¥:</strong> ${newPublication.publication_date}<br>
                <strong>ã‚«ãƒ†ã‚´ãƒªãƒ¼:</strong> ${newPublication.category}<br><br>
                <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong><br>
                1. HomePage ã‚’ãƒªãƒ­ãƒ¼ãƒ‰<br>
                2. Publicationsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèª<br>
                3. åˆŠè¡Œç‰©ã‚«ãƒ¼ãƒ‰ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ç¢ºèª
            `;
        }
        
        function addMultiplePublications() {
            const resultDiv = document.getElementById('add-result');
            resultDiv.className = 'result show';
            
            const data = loadMockData() || { publications: [] };
            data.publications = data.publications || [];
            
            const today = new Date();
            const publications = [
                {
                    id: Date.now() + 1,
                    title: 'Hot Information Vol.999ï¼ˆæœ€æ–°å·ï¼‰',
                    description: '2025å¹´åº¦ä¸‹åŠæœŸã®çµŒæ¸ˆå±•æœ›ã¨åœ°åŸŸæ´»æ€§åŒ–æˆ¦ç•¥ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã€‚',
                    publication_date: today.toISOString().split('T')[0],
                    publishedDate: today.toISOString().split('T')[0],
                    category: 'monthly',
                    type: 'pdf',
                    image_url: '/img/-----2-2-5.png'
                },
                {
                    id: Date.now() + 2,
                    title: 'åœ°åŸŸçµŒæ¸ˆç™½æ›¸2025',
                    description: 'ä¹å·åœ°åŸŸã®çµŒæ¸ˆå‹•å‘ã‚’åŒ…æ‹¬çš„ã«åˆ†æã—ãŸå¹´æ¬¡ãƒ¬ãƒãƒ¼ãƒˆã€‚',
                    publication_date: new Date(today.getTime() - 86400000).toISOString().split('T')[0],
                    publishedDate: new Date(today.getTime() - 86400000).toISOString().split('T')[0],
                    category: 'research',
                    type: 'pdf',
                    image_url: ''
                },
                {
                    id: Date.now() + 3,
                    title: 'çµŒå–¶å‚è€ƒBOOK vol.100ï¼ˆè¨˜å¿µå·ï¼‰',
                    description: 'å‰µåˆŠ100å·è¨˜å¿µã€‚éå»ã®å„ªè‰¯äº‹ä¾‹ã¨æœªæ¥ã¸ã®æè¨€ã€‚',
                    publication_date: new Date(today.getTime() - 172800000).toISOString().split('T')[0],
                    publishedDate: new Date(today.getTime() - 172800000).toISOString().split('T')[0],
                    category: 'book',
                    type: 'pdf',
                    image_url: '/img/-----2-2-1.png'
                },
                {
                    id: Date.now() + 4,
                    title: 'SDGså®Ÿè·µã‚¬ã‚¤ãƒ‰',
                    description: 'ä¸­å°ä¼æ¥­ã®ãŸã‚ã®SDGså®Ÿè·µãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€‚',
                    publication_date: new Date(today.getTime() - 259200000).toISOString().split('T')[0],
                    publishedDate: new Date(today.getTime() - 259200000).toISOString().split('T')[0],
                    category: 'special',
                    type: 'pdf',
                    image_url: ''
                },
                {
                    id: Date.now() + 5,
                    title: 'DXãƒãƒ³ãƒ‰ãƒ–ãƒƒã‚¯',
                    description: 'ãƒ‡ã‚¸ã‚¿ãƒ«å¤‰é©ã‚’æˆåŠŸã•ã›ã‚‹ãŸã‚ã®å®Ÿè·µçš„æ‰‹å¼•ãã€‚',
                    publication_date: new Date(today.getTime() - 345600000).toISOString().split('T')[0],
                    publishedDate: new Date(today.getTime() - 345600000).toISOString().split('T')[0],
                    category: 'guide',
                    type: 'pdf',
                    image_url: ''
                }
            ];
            
            // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®å‰ã«è¿½åŠ ï¼ˆæœ€æ–°é †ï¼‰
            data.publications = [...publications, ...data.publications];
            saveMockData(data);
            
            resultDiv.innerHTML = `
                <strong>âœ… 5ä»¶ã®åˆŠè¡Œç‰©ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼</strong><br><br>
                è¿½åŠ ã•ã‚ŒãŸåˆŠè¡Œç‰©ï¼š<br>
                ${publications.map(p => `â€¢ ${p.title}`).join('<br>')}<br><br>
                <strong>HomePage.vueã§ç¢ºèªã§ãã‚‹ã“ã¨ï¼š</strong><br>
                â€¢ åˆŠè¡Œç‰©ã‚«ãƒ¼ãƒ‰: ã€ŒåˆŠè¡Œç‰©(${data.publications.length}ä»¶)ã€<br>
                â€¢ ãƒ¡ã‚¤ãƒ³åˆŠè¡Œç‰©: ã€Œ${publications[0].title}ã€<br>
                â€¢ å³å´ãƒªã‚¹ãƒˆ: æœ€æ–°4ä»¶ãŒè¡¨ç¤º
            `;
        }
        
        function clearPublications() {
            if (confirm('ã™ã¹ã¦ã®åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                const data = loadMockData() || {};
                data.publications = [];
                saveMockData(data);
                
                const resultDiv = document.getElementById('add-result');
                resultDiv.className = 'result show';
                resultDiv.innerHTML = 'âœ… åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ';
            }
        }
        
        function openHomePage() {
            window.open('http://localhost:8081', '_blank');
        }
        
        function testRealtimeUpdate() {
            const resultDiv = document.getElementById('realtime-result');
            resultDiv.className = 'result show';
            
            // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã®åˆŠè¡Œç‰©ã‚’è¿½åŠ 
            const timestamp = new Date().toLocaleTimeString('ja-JP');
            const data = loadMockData() || { publications: [] };
            data.publications = data.publications || [];
            
            const realtimePublication = {
                id: Date.now(),
                title: `ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆ [${timestamp}]`,
                description: 'ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯' + timestamp + 'ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚',
                publication_date: new Date().toISOString().split('T')[0],
                publishedDate: new Date().toISOString().split('T')[0],
                category: 'test',
                type: 'pdf'
            };
            
            data.publications.unshift(realtimePublication);
            saveMockData(data);
            
            resultDiv.innerHTML = `
                <strong>â±ï¸ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼</strong><br><br>
                <strong>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—:</strong> ${timestamp}<br>
                <strong>ã‚¿ã‚¤ãƒˆãƒ«:</strong> ${realtimePublication.title}<br><br>
                <strong>ç¢ºèªæ–¹æ³•:</strong><br>
                1. HomePage.vue ã‚’ãƒªãƒ­ãƒ¼ãƒ‰<br>
                2. Publications ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ç”»åƒä¸‹ã«è¡¨ç¤º<br>
                3. ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
            `;
        }
        
        function showDebugInfo() {
            const resultDiv = document.getElementById('debug-result');
            resultDiv.className = 'result show';
            
            const data = loadMockData();
            
            let html = '<strong>ğŸ” ãƒ‡ãƒãƒƒã‚°æƒ…å ±:</strong><br><br>';
            
            if (data) {
                html += '<div class="code-block">' + JSON.stringify(data, null, 2) + '</div>';
                
                html += '<br><strong>ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼:</strong><br>';
                html += `â€¢ ã‚»ãƒŸãƒŠãƒ¼: ${data.seminars ? data.seminars.length : 0}ä»¶<br>`;
                html += `â€¢ åˆŠè¡Œç‰©: ${data.publications ? data.publications.length : 0}ä»¶<br>`;
                html += `â€¢ ãŠçŸ¥ã‚‰ã›: ${data.notices ? data.notices.length : 0}ä»¶<br>`;
                
                if (data.publications && data.publications.length > 0) {
                    html += '<br><strong>æœ€æ–°ã®åˆŠè¡Œç‰©ï¼ˆHomePage.vueã®ãƒ¡ã‚¤ãƒ³ã«è¡¨ç¤ºï¼‰:</strong><br>';
                    html += `ã‚¿ã‚¤ãƒˆãƒ«: ${data.publications[0].title}<br>`;
                    html += `ç”»åƒURL: ${data.publications[0].image_url || 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒ'}<br>`;
                }
            } else {
                html += 'âŒ LocalStorageã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“';
            }
            
            resultDiv.innerHTML = html;
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
        window.onload = function() {
            checkCurrentData();
        };
    </script>
</body>
</html>