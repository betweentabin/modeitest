<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #c9302c;
            padding-bottom: 10px;
        }
        h2 {
            color: #c9302c;
            margin-top: 0;
        }
        button {
            background: #c9302c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #a02622;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ä¼šå“¡ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2>1. ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ</h2>
        <div class="test-grid">
            <button onclick="testLogin('basic')">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button onclick="testLogin('standard')">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button onclick="testLogin('premium')">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button onclick="testLogin('invalid')">ç„¡åŠ¹ãªèªè¨¼æƒ…å ±</button>
        </div>
        <div id="loginResult"></div>
    </div>

    <div class="test-section">
        <h2>2. ä¼šå“¡æƒ…å ±å–å¾—ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="getMemberInfo()">ç¾åœ¨ã®ä¼šå“¡æƒ…å ±å–å¾—</button>
        <button onclick="checkLoginStatus()">ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ç¢ºèª</button>
        <div id="memberResult"></div>
    </div>

    <div class="test-section">
        <h2>3. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒ†ã‚¹ãƒˆ</h2>
        <div class="test-grid">
            <button onclick="testAccess('basic')">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>
            <button onclick="testAccess('standard')">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>
            <button onclick="testAccess('premium')">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>
        </div>
        <div id="accessResult"></div>
    </div>

    <div class="test-section">
        <h2>4. APIæ¥ç¶šãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testAPIHealth()">ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯</button>
        <button onclick="testPublications()">åˆŠè¡Œç‰©API</button>
        <button onclick="testSeminars()">ã‚»ãƒŸãƒŠãƒ¼API</button>
        <div id="apiResult"></div>
    </div>

    <div class="test-section">
        <h2>5. ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</h2>
        <div class="test-grid">
            <button onclick="navigateTo('/')">ãƒ›ãƒ¼ãƒ </button>
            <button onclick="navigateTo('/login')">ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button onclick="navigateTo('/my-account')">ãƒã‚¤ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</button>
            <button onclick="navigateTo('/upgrade')">ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰</button>
            <button onclick="navigateTo('/publications')">åˆŠè¡Œç‰©</button>
            <button onclick="navigateTo('/seminars')">ã‚»ãƒŸãƒŠãƒ¼</button>
            <button onclick="navigateTo('/contact')">ãŠå•ã„åˆã‚ã›</button>
        </div>
        <div id="navResult"></div>
    </div>

    <script>
        const BASE_URL = 'http://localhost:8080';
        
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
        async function testLogin(type) {
            const credentials = {
                basic: { email: 'member@example.com', password: 'password' },
                standard: { email: 'standard@example.com', password: 'password' },
                premium: { email: 'premium@example.com', password: 'password' },
                invalid: { email: 'wrong@example.com', password: 'wrongpass' }
            };
            
            const resultDiv = document.getElementById('loginResult');
            
            try {
                // mockServerã®ãƒ­ã‚°ã‚¤ãƒ³é–¢æ•°ã‚’ç›´æ¥å‘¼ã³å‡ºã—
                const mockLogin = async (email, password) => {
                    const validCredentials = [
                        { email: 'member@example.com', password: 'password', type: 'basic' },
                        { email: 'standard@example.com', password: 'password', type: 'standard' },
                        { email: 'premium@example.com', password: 'password', type: 'premium' }
                    ];
                    
                    const user = validCredentials.find(
                        cred => cred.email === email && cred.password === password
                    );
                    
                    if (user) {
                        const token = `member_token_${Date.now()}`;
                        const memberData = {
                            id: Math.random().toString(36).substr(2, 9),
                            name: type === 'basic' ? 'å±±ç”°å¤ªéƒ' : type === 'standard' ? 'ä½è—¤èŠ±å­' : 'ç”°ä¸­ä¸€éƒ',
                            email: email,
                            company: 'æ ªå¼ä¼šç¤¾ãƒ†ã‚¹ãƒˆ',
                            membershipType: user.type
                        };
                        
                        localStorage.setItem('memberToken', token);
                        localStorage.setItem('memberUser', JSON.stringify(memberData));
                        
                        return { success: true, member: memberData, token };
                    }
                    
                    return { success: false, error: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“' };
                };
                
                const cred = credentials[type];
                const result = await mockLogin(cred.email, cred.password);
                
                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="result success">
                            âœ… ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ<br>
                            ä¼šå“¡: ${result.member.name}<br>
                            ãƒ©ãƒ³ã‚¯: ${result.member.membershipType}<br>
                            ãƒˆãƒ¼ã‚¯ãƒ³: ${result.token.substring(0, 20)}...
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="result error">
                            âŒ ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—<br>
                            ã‚¨ãƒ©ãƒ¼: ${result.error}
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="result error">
                        âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}
                    </div>
                `;
            }
        }
        
        // ä¼šå“¡æƒ…å ±å–å¾—
        function getMemberInfo() {
            const resultDiv = document.getElementById('memberResult');
            const memberData = localStorage.getItem('memberUser');
            const token = localStorage.getItem('memberToken');
            
            if (memberData && token) {
                const member = JSON.parse(memberData);
                resultDiv.innerHTML = `
                    <div class="result success">
                        âœ… ä¼šå“¡æƒ…å ±å–å¾—æˆåŠŸ<br>
                        åå‰: ${member.name}<br>
                        ãƒ¡ãƒ¼ãƒ«: ${member.email}<br>
                        ä¼šç¤¾: ${member.company}<br>
                        ãƒ©ãƒ³ã‚¯: ${member.membershipType}
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="result info">
                        â„¹ï¸ ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“
                    </div>
                `;
            }
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ç¢ºèª
        function checkLoginStatus() {
            const resultDiv = document.getElementById('memberResult');
            const isLoggedIn = !!localStorage.getItem('memberToken');
            
            resultDiv.innerHTML = `
                <div class="result ${isLoggedIn ? 'success' : 'info'}">
                    ${isLoggedIn ? 'âœ… ãƒ­ã‚°ã‚¤ãƒ³ä¸­' : 'â„¹ï¸ æœªãƒ­ã‚°ã‚¤ãƒ³'}
                </div>
            `;
        }
        
        // ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒ†ã‚¹ãƒˆ
        function testAccess(requiredType) {
            const resultDiv = document.getElementById('accessResult');
            const memberData = localStorage.getItem('memberUser');
            
            if (!memberData) {
                resultDiv.innerHTML = `
                    <div class="result error">
                        âŒ ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™
                    </div>
                `;
                return;
            }
            
            const member = JSON.parse(memberData);
            const ranks = { basic: 1, standard: 2, premium: 3 };
            const currentRank = ranks[member.membershipType] || 0;
            const requiredRank = ranks[requiredType] || 0;
            
            if (currentRank >= requiredRank) {
                resultDiv.innerHTML = `
                    <div class="result success">
                        âœ… ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯<br>
                        ${requiredType}ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ã§ã™
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="result error">
                        âŒ ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦<br>
                        ${requiredType}ä»¥ä¸Šã®ä¼šå“¡ãƒ©ãƒ³ã‚¯ãŒå¿…è¦ã§ã™<br>
                        ç¾åœ¨: ${member.membershipType}
                    </div>
                `;
            }
        }
        
        // APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
        async function testAPIHealth() {
            const resultDiv = document.getElementById('apiResult');
            
            try {
                // ã¾ãšLaravel APIã‚’è©¦ã™
                const response = await fetch('https://heroic-celebration-production.up.railway.app/api/health');
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `
                        <div class="result success">
                            âœ… Laravel APIæ¥ç¶šæˆåŠŸ<br>
                            ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${data.status}<br>
                            ã‚µãƒ¼ãƒ“ã‚¹: ${data.service}
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="result info">
                            â„¹ï¸ Laravel APIæ¥ç¶šå¤±æ•— (${response.status})<br>
                            mockServerã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¸­
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="result info">
                        â„¹ï¸ APIæ¥ç¶šã‚¨ãƒ©ãƒ¼<br>
                        mockServerã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™
                    </div>
                `;
            }
        }
        
        // åˆŠè¡Œç‰©APIãƒ†ã‚¹ãƒˆ
        async function testPublications() {
            const resultDiv = document.getElementById('apiResult');
            
            // mockServerã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
            const publications = [
                { id: 1, title: 'ã¡ããã‚“åœ°åŸŸçµŒæ¸ˆãƒ¬ãƒãƒ¼ãƒˆ Vol.15', requiredMembershipType: 'basic' },
                { id: 2, title: 'Hot Information 2024å¹´3æœˆå·', requiredMembershipType: 'standard' },
                { id: 3, title: 'ç‰¹åˆ¥èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ', requiredMembershipType: 'premium' }
            ];
            
            resultDiv.innerHTML = `
                <div class="result success">
                    âœ… åˆŠè¡Œç‰©ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ<br>
                    ä»¶æ•°: ${publications.length}ä»¶<br>
                    ${publications.map(p => `ãƒ»${p.title} (${p.requiredMembershipType})`).join('<br>')}
                </div>
            `;
        }
        
        // ã‚»ãƒŸãƒŠãƒ¼APIãƒ†ã‚¹ãƒˆ
        async function testSeminars() {
            const resultDiv = document.getElementById('apiResult');
            
            // mockServerã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
            const seminars = [
                { id: 1, title: 'åœ°åŸŸçµŒæ¸ˆå‹•å‘ã‚»ãƒŸãƒŠãƒ¼', date: '2024-04-15' },
                { id: 2, title: 'ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–æ¨é€²ã‚»ãƒŸãƒŠãƒ¼', date: '2024-05-20' }
            ];
            
            resultDiv.innerHTML = `
                <div class="result success">
                    âœ… ã‚»ãƒŸãƒŠãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ<br>
                    ä»¶æ•°: ${seminars.length}ä»¶<br>
                    ${seminars.map(s => `ãƒ»${s.title} (${s.date})`).join('<br>')}
                </div>
            `;
        }
        
        // ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        function navigateTo(path) {
            const resultDiv = document.getElementById('navResult');
            const fullUrl = `${BASE_URL}/#${path}`;
            
            resultDiv.innerHTML = `
                <div class="result info">
                    ğŸ“ ${fullUrl} ã¸ç§»å‹•ä¸­...
                </div>
            `;
            
            window.open(fullUrl, '_blank');
        }
    </script>
</body>
</html>