<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1A1A1A;
            margin-top: 0;
        }
        button {
            background: #da5761;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #c44853;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #ddd;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .error {
            background: #fee2e2;
            border-color: #fca5a5;
            color: #dc2626;
        }
        .success {
            background: #d1fae5;
            border-color: #6ee7b7;
            color: #065f46;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #f9f9f9;
            font-weight: 600;
        }
        .page-key {
            font-family: monospace;
            background: #e5e5e5;
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>ğŸ“„ ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="section">
        <h2>1. localStorage ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</h2>
        <button onclick="checkLocalStorage()">localStorageç¢ºèª</button>
        <button onclick="clearLocalStorage()">localStorage ã‚¯ãƒªã‚¢</button>
        <button onclick="resetToDefault()">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã«ãƒªã‚»ãƒƒãƒˆ</button>
        <div id="localStorage-result" class="result"></div>
    </div>

    <div class="section">
        <h2>2. MockServer ã®ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</h2>
        <button onclick="testGetPages()">getPages() ãƒ†ã‚¹ãƒˆ</button>
        <div id="pages-result" class="result"></div>
    </div>

    <div class="section">
        <h2>3. å€‹åˆ¥ãƒšãƒ¼ã‚¸ã®å–å¾—ãƒ†ã‚¹ãƒˆ</h2>
        <select id="pageKey">
            <option value="about">about</option>
            <option value="services">services</option>
            <option value="seminars">seminars</option>
            <option value="publications">publications</option>
            <option value="news">news</option>
            <option value="contact">contact</option>
            <option value="faq">faq</option>
            <option value="glossary">glossary</option>
            <option value="privacy">privacy</option>
            <option value="terms">terms</option>
        </select>
        <button onclick="testGetPage()">getPage() ãƒ†ã‚¹ãƒˆ</button>
        <div id="page-result" class="result"></div>
    </div>

    <script>
        const STORAGE_KEY = 'cms_mock_data';

        function checkLocalStorage() {
            const resultDiv = document.getElementById('localStorage-result');
            try {
                const data = localStorage.getItem(STORAGE_KEY);
                if (data) {
                    const parsed = JSON.parse(data);
                    let html = '<h3>localStorage ãƒ‡ãƒ¼ã‚¿:</h3>';
                    html += `<p>ã‚»ãƒŸãƒŠãƒ¼æ•°: ${parsed.seminars ? parsed.seminars.length : 0}</p>`;
                    html += `<p>åˆŠè¡Œç‰©æ•°: ${parsed.publications ? parsed.publications.length : 0}</p>`;
                    html += `<p>ãŠçŸ¥ã‚‰ã›æ•°: ${parsed.notices ? parsed.notices.length : 0}</p>`;
                    html += `<p>ãƒ¡ãƒ‡ã‚£ã‚¢æ•°: ${parsed.media ? parsed.media.length : 0}</p>`;
                    html += `<p>ä¼šå“¡æ•°: ${parsed.members ? parsed.members.length : 0}</p>`;
                    
                    html += '<h4>ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿:</h4>';
                    if (parsed.pages) {
                        const pageKeys = Object.keys(parsed.pages);
                        html += `<p>ãƒšãƒ¼ã‚¸æ•°: ${pageKeys.length}</p>`;
                        html += '<table>';
                        html += '<tr><th>ãƒšãƒ¼ã‚¸ã‚­ãƒ¼</th><th>ã‚¿ã‚¤ãƒˆãƒ«</th><th>æœ€çµ‚æ›´æ–°</th></tr>';
                        pageKeys.forEach(key => {
                            const page = parsed.pages[key];
                            html += `<tr>`;
                            html += `<td><span class="page-key">${key}</span></td>`;
                            html += `<td>${page.title || '(ãªã—)'}</td>`;
                            html += `<td>${page.lastUpdated || '(ãªã—)'}</td>`;
                            html += `</tr>`;
                        });
                        html += '</table>';
                    } else {
                        html += '<p style="color: red;">ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ï¼</p>';
                    }
                    
                    resultDiv.innerHTML = html;
                    resultDiv.className = 'result success';
                } else {
                    resultDiv.innerHTML = 'localStorage ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“';
                    resultDiv.className = 'result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        function clearLocalStorage() {
            const resultDiv = document.getElementById('localStorage-result');
            localStorage.removeItem(STORAGE_KEY);
            resultDiv.innerHTML = 'localStorage ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒä½œæˆã•ã‚Œã¾ã™ã€‚';
            resultDiv.className = 'result success';
        }

        function resetToDefault() {
            const resultDiv = document.getElementById('localStorage-result');
            localStorage.removeItem(STORAGE_KEY);
            location.reload();
        }

        async function testGetPages() {
            const resultDiv = document.getElementById('pages-result');
            try {
                // mockServer ã‚’å‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                const module = await import('./src/mockServer.js');
                const mockServer = module.default;
                
                const pages = await mockServer.getPages();
                let html = '<h3>getPages() ã®çµæœ:</h3>';
                html += `<p>å–å¾—ã—ãŸãƒšãƒ¼ã‚¸æ•°: ${pages.length}</p>`;
                html += '<table>';
                html += '<tr><th>ãƒšãƒ¼ã‚¸ã‚­ãƒ¼</th><th>ã‚¿ã‚¤ãƒˆãƒ«</th><th>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</th><th>æœ€çµ‚æ›´æ–°</th></tr>';
                pages.forEach(page => {
                    html += `<tr>`;
                    html += `<td><span class="page-key">${page.pageKey}</span></td>`;
                    html += `<td>${page.title || '(ãªã—)'}</td>`;
                    html += `<td>${page.content ? page.content.substring(0, 30) + '...' : '(ãªã—)'}</td>`;
                    html += `<td>${page.lastUpdated || '(ãªã—)'}</td>`;
                    html += `</tr>`;
                });
                html += '</table>';
                
                resultDiv.innerHTML = html;
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.innerHTML = `ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        async function testGetPage() {
            const resultDiv = document.getElementById('page-result');
            const pageKey = document.getElementById('pageKey').value;
            
            try {
                const module = await import('./src/mockServer.js');
                const mockServer = module.default;
                
                const page = await mockServer.getPage(pageKey);
                let html = `<h3>getPage('${pageKey}') ã®çµæœ:</h3>`;
                html += '<pre>' + JSON.stringify(page, null, 2) + '</pre>';
                
                resultDiv.innerHTML = html;
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.innerHTML = `ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', () => {
            checkLocalStorage();
        });
    </script>
</body>
</html>