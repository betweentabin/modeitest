<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Debug</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border-radius: 3px;
        }
        button:hover {
            background: #005a9e;
        }
        .info {
            color: #4ec9b0;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Storage Debug Tool</h1>
    
    <div class="info" id="info"></div>
    
    <button onclick="showCurrent()">ç¾åœ¨ã®Storageè¡¨ç¤º</button>
    <button onclick="showPagesOnly()">Pagesã®ã¿è¡¨ç¤º</button>
    <button onclick="fixStorage()">Storageä¿®æ­£å®Ÿè¡Œ</button>
    <button onclick="clearAndReload()">ã‚¯ãƒªã‚¢ã—ã¦å†èª­ã¿è¾¼ã¿</button>
    
    <pre id="output"></pre>

    <script>
        const STORAGE_KEY = 'cms_mock_data';
        
        function showCurrent() {
            const data = localStorage.getItem(STORAGE_KEY);
            if (data) {
                const parsed = JSON.parse(data);
                const info = document.getElementById('info');
                info.innerHTML = `
                    ãƒ‡ãƒ¼ã‚¿æ¦‚è¦: 
                    - Seminars: ${parsed.seminars?.length || 0}ä»¶
                    - Publications: ${parsed.publications?.length || 0}ä»¶
                    - Notices: ${parsed.notices?.length || 0}ä»¶
                    - Pages: ${parsed.pages ? Object.keys(parsed.pages).length : 0}ä»¶
                `;
                document.getElementById('output').textContent = JSON.stringify(parsed, null, 2);
            } else {
                document.getElementById('output').textContent = 'No data in localStorage';
            }
        }
        
        function showPagesOnly() {
            const data = localStorage.getItem(STORAGE_KEY);
            if (data) {
                const parsed = JSON.parse(data);
                document.getElementById('output').textContent = 
                    'Pages ãƒ‡ãƒ¼ã‚¿:\n' + JSON.stringify(parsed.pages, null, 2);
            }
        }
        
        function fixStorage() {
            // ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const currentData = localStorage.getItem(STORAGE_KEY);
            let data = currentData ? JSON.parse(currentData) : {};
            
            // pagesãŒä¸å®Œå…¨ãªå ´åˆã¯ä¿®æ­£
            const expectedPages = {
                about: {
                    title: 'ã¡ããã‚“åœ°åŸŸçµŒæ¸ˆç ”ç©¶æ‰€ã«ã¤ã„ã¦',
                    content: 'åœ°åŸŸçµŒæ¸ˆã®ç™ºå±•ã«è²¢çŒ®ã™ã‚‹ç ”ç©¶æ©Ÿé–¢ã§ã™ã€‚',
                    lastUpdated: '2025-05-01'
                },
                services: {
                    title: 'ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§',
                    content: 'çµŒæ¸ˆèª¿æŸ»ã€ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã€ã‚»ãƒŸãƒŠãƒ¼é–‹å‚¬ãªã©',
                    lastUpdated: '2025-04-28'
                },
                seminars: {
                    title: 'ã‚»ãƒŸãƒŠãƒ¼',
                    content: 'ã‚»ãƒŸãƒŠãƒ¼æƒ…å ±ãƒšãƒ¼ã‚¸',
                    lastUpdated: '2025-04-28'
                },
                publications: {
                    title: 'åˆŠè¡Œç‰©',
                    content: 'åˆŠè¡Œç‰©ä¸€è¦§ãƒšãƒ¼ã‚¸',
                    lastUpdated: '2025-04-28'
                },
                news: {
                    title: 'ãŠçŸ¥ã‚‰ã›',
                    content: 'ãŠçŸ¥ã‚‰ã›ä¸€è¦§ãƒšãƒ¼ã‚¸',
                    lastUpdated: '2025-04-28'
                },
                contact: {
                    title: 'ãŠå•ã„åˆã‚ã›',
                    content: 'ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ',
                    lastUpdated: '2025-04-28'
                },
                faq: {
                    title: 'ã‚ˆãã‚ã‚‹è³ªå•',
                    content: 'ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­”',
                    lastUpdated: '2025-04-28'
                },
                glossary: {
                    title: 'ç”¨èªé›†',
                    content: 'çµŒæ¸ˆç”¨èªé›†',
                    lastUpdated: '2025-04-28'
                },
                privacy: {
                    title: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',
                    content: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ãƒšãƒ¼ã‚¸',
                    lastUpdated: '2025-04-28'
                },
                terms: {
                    title: 'åˆ©ç”¨è¦ç´„',
                    content: 'åˆ©ç”¨è¦ç´„ãƒšãƒ¼ã‚¸',
                    lastUpdated: '2025-04-28'
                }
            };
            
            // pagesã‚’å®Œå…¨ã«ç½®ãæ›ãˆ
            data.pages = expectedPages;
            
            // ä¿å­˜
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            
            // ç¢ºèªè¡¨ç¤º
            const info = document.getElementById('info');
            info.innerHTML = `âœ… ä¿®æ­£å®Œäº†ï¼Pages: ${Object.keys(data.pages).length}ä»¶ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸ`;
            
            showCurrent();
        }
        
        function clearAndReload() {
            localStorage.removeItem(STORAGE_KEY);
            location.reload();
        }
        
        // åˆæœŸè¡¨ç¤º
        showCurrent();
    </script>
</body>
</html>